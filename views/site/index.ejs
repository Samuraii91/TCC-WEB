<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Bel√©m - Argamassa e Ferragem</title>
    <link rel="stylesheet" href="/css/styleSite.css">
</head>
<body>

<header class="topo">
    <div class="container">
        <div class="logo-container">
            <img src="/img/logo.png" class="logo-icon" alt="Logo Novo Bel√©m">
            <div class="logo-textos">
                <h1>Novo Bel√©m</h1>
                <span class="subtitulo">Argamassa e Ferragem</span>
            </div>
        </div>

        <input type="checkbox" id="menu-toggle" class="menu-toggle">
        <label for="menu-toggle" class="menu-mobile">‚ò∞</label>

        <nav class="menu">
            <a href="#servicos">Categorias</a>
            <a href="#produtos">Produtos</a>
            <a href="#contato">Or√ßamento</a>
            <a href="#localizacao">Localiza√ß√£o</a>
            <a href="https://wa.me/5553991027296?text=Ol√°!%20Quero%20saber%20mais!" target="_blank">Whatsapp</a>
        </nav>
    </div>

    <div class="container" style="padding: 10px 0;">
        <input 
            type="text" 
            id="pesquisa" 
            placeholder="üîç Pesquisar categorias" 
            style="width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #ccc;"
        >
    </div>
</header>

<section class="hero">
    <div class="container hero-content">
        <h2>Materiais de Qualidade para sua Obra</h2>
        <p>Os melhores pre√ßos e atendimento personalizado</p>
        <div class="hero-info">
            <div class="info-item"><span class="icon">üìû</span><span>(53) 991027296</span></div>
            <div class="info-item"><span class="icon">‚úâÔ∏è</span><span>profevinicius@gmail.com</span></div>
            <div class="info-item"><span class="icon">üïê</span><span>Seg-Sex: (8h-12h) e (13:30-17:30h) | S√°b: 8h-12h</span></div>
        </div>
    </div>
</section>

<section id="servicos" class="secao">
    <div class="container">
        <h2 class="titulo-secao">Nossas Categorias</h2>

        <div class="grid-servicos" id="listaCategorias">
            <% categorias.forEach(cat => { %>
                <div class="card-servico">
                   <img 
                        src="<% if (cat.imagemBase64) { %>
                                data:<%= cat.mimetype %>;base64,<%= cat.imagemBase64 %>
                             <% } else { %>
                                https://via.placeholder.com/300x200?text=Sem+Imagem
                             <% } %>"
                        alt="<%= cat.nome %>"
                   >
                    <div class="card-content">
                        <h3><%= cat.nome %></h3>
                        <p><%= cat.descricao %></p>
                    </div>
                </div>
            <% }) %>

            <% if (categorias.length === 0) { %>
                <p style="padding: 20px; font-size: 18px; text-align:center;">
                    Nenhuma categoria cadastrada ainda.
                </p>
            <% } %>
        </div>

        <div style="text-align:center; margin-top: 20px;">
            <button id="btnVerMaisCategorias" class="btn btn-azul">Ver mais categorias</button>
            <button id="btnVerMenosCategorias" class="btn btn-azul" style="display:none;">Mostrar menos</button>
        </div>
    </div>
</section>

<section id="produtos" class="secao secao-cinza">
    <div class="container">
        <h2 class="titulo-secao">Nossos Produtos</h2>

        <div class="grid-produtos">
            <% produtos.forEach(prod => { %>
                <div class="card-produto">
                    <img 
                        src="<%= prod.imagemBase64 ? `data:${prod.mimetype};base64,${prod.imagemBase64}` : 'https://via.placeholder.com/300x200?text=Sem+Imagem' %>"
                        alt="<%= prod.nome %>">

                    <div class="produto-info">
                        <h3><%= prod.nome %></h3>
                        <p class="preco">R$ <%= prod.preco.toFixed(2) %></p>

                        <% if (prod.categoria) { %>
                            <p class="categoria">Categoria: <%= prod.categoria.nome %></p>
                        <% } %>

                        <% if (prod.quantidade) { %>
                            <p class="quantidade">Quantidade em Estoque: <%= prod.quantidade %></p>
                        <% } %>

                        <a href="#contato" class="btn btn-azul">Solicitar Or√ßamento</a>
                    </div>
                </div>
            <% }) %>

            <% if (produtos.length === 0) { %>
                <p style="padding: 20px; font-size: 18px; text-align:center;">
                    Nenhum produto cadastrado ainda.
                </p>
            <% } %>
        </div>

        <div style="text-align:center; margin-top: 20px;">
            <button id="btnVerMais" class="btn btn-azul">Ver mais produtos</button>
            <button id="btnVerMenos" class="btn btn-azul" style="display:none;">Mostrar menos</button>
        </div>

    </div>
</section>

<section id="localizacao" class="secao">
    <div class="container">
        <h2 class="titulo-secao">Nossa Localiza√ß√£o</h2>
        <div class="grid-localizacao">

            <div class="card-localizacao">
                <div class="localizacao-info">
                    <div class="info-header"><span class="icon-grande">üìç</span><h3>Endere√ßo</h3></div>
                    <p>
                        Rua Pr√≥spero Ambr√≥sio Pesce, 220<br>
                        Bairro Passo do Pr√≠ncipe<br>
                        Bag√© - RS<br>
                        CEP 96400-000
                    </p>
                </div>

                <div class="horario-info">
                    <h4>Hor√°rio de Funcionamento</h4>
                    <p>Segunda a Sexta: (8h-12h) e (13:30-17:30h)</p>
                    <p>S√°bado: 8h-12h</p>
                    <p>Domingo: Fechado</p>
                </div>
            </div>

            <div class="mapa">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3292.5216540441243!2d-54.107494729870226!3d-31.344687084025722!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9506750d27fd612d%3A0xf778add48b04070!2sArgamassa%20e%20Material%20de%20Constru%C3%A7%C3%A3o%20Novo%20Bel%C3%A9m!5e0!3m2!1spt-BR!2sbr!4v1763379837572!5m2!1spt-BR!2sbr"
                    width="100%" height="400" style="border:0; border-radius: 12px;" loading="lazy">
                </iframe>
            </div>

        </div>
    </div>
</section>

<section id="contato" class="secao secao-cinza">
    <div class="container">
        <h2 class="titulo-secao">Entre em Contato</h2>

        <div class="formulario-container">
            <form class="formulario" action="https://formspree.io/f/xrbwqlzb" method="POST">
                <input type="hidden" name="_replyto" value="profevinicius@gmail.com">
                <input type="hidden" name="_subject" value="Novo Contato do Site Novo Bel√©m">

                <div class="form-group">
                    <label for="nome">Nome *</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="form-group">
                    <label for="email">E-mail *</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="telefone">Telefone *</label>
                    <input type="tel" id="telefone" name="telefone" required>
                </div>

                <div class="form-group">
                    <label for="produto">Produto de Interesse *</label>
                    <select id="produto" name="produto" required>
                        <option value="">Selecione um produto</option>
                        <% produtos.forEach(prod => { %>
                            <option value="<%= prod.nome %>">
                                <%= prod.nome %> - R$ <%= prod.preco %>
                            </option>
                        <% }) %>
                    </select>
                </div>

                <div class="form-group">
                    <label for="quantidade">Quantidade Desejada *</label>
                    <input type="number" id="quantidade" name="quantidade" min="1" required>
                </div>

                <div class="form-group">
                    <label for="mensagem">Mensagem</label>
                    <textarea id="mensagem" name="mensagem" rows="5"></textarea>
                </div>

                <button type="submit" class="btn btn-azul">Enviar Mensagem</button>
            </form>
        </div>
    </div>
</section>

<footer class="rodape">
    <div class="container">
        <p>&copy; 2025 Novo Bel√©m - Argamassa e Ferragem. Todos os direitos reservados.</p>
        <p class="rodape-info">Rua Pr√≥spero Ambr√≥sio Pesce, 220 - Bairro Passo do Pr√≠ncipe - Bag√©, RS - CEP 96400-000</p>
    </div>
</footer>

<script>
function removerAcentos(texto) {
    if (!texto) return "";
    return texto.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

const inputPesquisa = document.getElementById("pesquisa");

inputPesquisa.addEventListener("input", function () {
    const termo = removerAcentos(this.value.toLowerCase().trim());

    document.querySelectorAll(".card-servico").forEach(card => {
        const nome = removerAcentos(card.querySelector("h3").textContent.toLowerCase());
        const desc = removerAcentos(card.querySelector("p").textContent.toLowerCase());
        card.style.display = (nome.includes(termo) || desc.includes(termo)) ? "" : "none";
    });

    document.querySelectorAll(".card-produto").forEach(card => {
        const nome = removerAcentos(card.querySelector("h3").textContent.toLowerCase());
        let categoria = "";
        const catEl = card.querySelector(".categoria");
        if (catEl) categoria = removerAcentos(catEl.textContent.replace(/Categoria:\s*/i, "").toLowerCase());
        card.style.display = (nome.includes(termo) || categoria.includes(termo)) ? "" : "none";
    });
});


const produtos = document.querySelectorAll(".card-produto");
let produtosVisiveis = 4;

function atualizarProdutos() {
    produtos.forEach((p, i) => p.style.display = i < produtosVisiveis ? "block" : "none");

    document.getElementById("btnVerMais").style.display =
        produtosVisiveis >= produtos.length ? "none" : "inline-block";

    document.getElementById("btnVerMenos").style.display =
        produtosVisiveis > 4 ? "inline-block" : "none";
}

atualizarProdutos();

document.getElementById("btnVerMais").addEventListener("click", () => {
    produtosVisiveis += 4;
    atualizarProdutos();
});

document.getElementById("btnVerMenos").addEventListener("click", () => {
    produtosVisiveis = 4;
    atualizarProdutos();
});


const categoriasLista = document.querySelectorAll(".card-servico");
let categoriasVisiveis = 3;

function atualizarCategorias() {
    categoriasLista.forEach((c, i) => c.style.display = i < categoriasVisiveis ? "block" : "none");

    document.getElementById("btnVerMaisCategorias").style.display =
        categoriasVisiveis >= categoriasLista.length ? "none" : "inline-block";

    document.getElementById("btnVerMenosCategorias").style.display =
        categoriasVisiveis > 3 ? "inline-block" : "none";
}

atualizarCategorias();

document.getElementById("btnVerMaisCategorias").addEventListener("click", () => {
    categoriasVisiveis += 3;
    atualizarCategorias();
});

document.getElementById("btnVerMenosCategorias").addEventListener("click", () => {
    categoriasVisiveis = 3;
    atualizarCategorias();
});
</script>

</body>
</html>
